#!/usr/bin/env ruby
repo="sickp/alpine-nginx"

nginx_version = ARGV.first
unless nginx_version =~ /\A\d+\.\d+\.\d+\z/
  puts "Usage: push <nginx-version>"
  puts "  <nginx-version> = X.Y.Z"
  exit 1
end

[ nginx_version, "#{nginx_version}-k8s", "1.9", "mainline", "latest" ].each do |tag|
  system("docker push #{repo}:#{tag}") || abort
  puts "Pushed #{repo}:#{tag}"
end
